---
tags: [Vela Gaming, Transfer Wallet]
---

![Vela Gaming](../../assets/images/vela_gaming/logo.jpg)

# Transfer Wallet

## Overview

This document describes the service integration between **Gaming (provider)** and a **operator**. The following chapters describe the general concept of integration as well as descriptions and examples of the API methods used for the service integration.

### General Notes

- Data Format: JSON (JavaScript Object Notation)
- Financial Options: Separate Wallet
- **Operator** - Referred as the operator or agent party
- **Provider** - Referred as the game provider
- **Host ID** - This Host ID is a unique token generated from game provider
- **Points** - Referred as the game points; not player's actual wallet balance.
- The operator manages the user account database (personal information, balance, wallet operations, etc.)
- The Provider only manages the player data necessary to perform game operation.
- All methods support uses **HTTPS GET** verb in the system.
- Players perform all betting and gaming by using VG Game Server's wallet system. Therefore, **Operator** need to integrate VG API into your web site.

### Getting started

To be able to connect to our game server. **Operator** needs to provide the following API for us to communicate between game server and operator site. Players perform all betting and gaming by using VG Game Server's wallet system. Therefore, **Operator** need to integrate [**VG API**](#fund-transfer-operator-to-provider) into your web site.

* [Authenticate](#authenticate)

### Game Launch Process

- When player launch the game, it will call the [**Authenticate**](#authenticate) API.
- You will need to provide us the [**Authenticate**](#authenticate) API.
- The [**Authenticate**](#authenticate) API is used by VG Game Server to retrieve players' information
- If the player is not found in VG Game Server, VG Game Server will treat it as new player and register as a new player.
- This method is called on launching the game for the logged-in player.

![Diagram](../../assets/images/vela_gaming/game_launch_diagram.jpg)

---

## API

### Authenticate

Authenticate API is called upon launching the game for the logged-in player. **Operator needs to implement this API for user verification**.

<!--
type: tab
title: Docs
-->

### Request

| Name         | Type   | Description                                                                    |
| ------------ | ------ | ------------------------------------------------------------------------------ |
| access_token | string | The access token is generated by operator system for the player’s session. |
| game_code    | string | Game code                                                                      |

> ##### Example
>
> http://{OPERATOR_API_ENDPOINT}/api/user/authenticate?access_token={access_token}&game_code=fish

### Response

| Name        | Type   | Description             |
| ----------- | ------ | ----------------------- |
| status_code | int    | Response status code    |
| member_id   | string | Unique ID of the player |
| currency    | string | Currency code refer to ISO 4217           |

#### Status Code

| Code | Description   |
| ---- | ------------- |
| 0    | Success       |
| 1    | Invalid Token |

<!--
type: tab
title: Examples
-->

### Sample Success Response

```json
{
  "status_code": 0,
  "member_id": "demo01",
  "currency": "MYR"
}
```

### Sample Error Response

```json
{
  "status_code": 1,
  "message": "Invalid Token"
}
```

<!--
type: tab
title: Try It
-->

```json http
{
  "method": "get",
  "url": "http://{OPERATOR_API_ENDPOINT}/api/users/authenticate",
  "query": {
    "access_token": "{access_token}",
    "game_code": "fish"
  }
}
```

<!-- type: tab-end -->

---

## Fund Transfer (Operator to Provider)

When a operator wishes to use a separate account, the integration is done via a set of API offered by the game provider. Funds are deposited and witdrawn to the game provider with API calls. The relevant API calls are:

- [Create Player](#create-player)
- [Get Balance](#get-balance)
- [Deposit](#deposit)
- [Withdraw](#withdraw)
- [Game List](#game-list)
- [Game Launch](#game-launch)
- [User Report](#user-report)

#### Error handling

All response should have **error** to indicate whether there is error happened. An example of error strut is as following:

```json
{
  "error": {
    "status_code": 2,
    "message": "Invalid Host ID"
  }
}
```

All **success** response should have data to indicate. An example of success strut is as following:

```json
{
  "data": {
    "status_code": 0,
    "balance": 100000
  }
}
```

---

### Create Player

For creating new player account, the create player API call should be used.

<!--
type: tab
title: Docs
-->

### Request

| Name      | Type   | Description                                          |
| --------- | ------ | ---------------------------------------------------- |
| host_id   | string | Unique ID of Operator System (provided by game provider) |
| member_id | string | Unique ID / Username of the player                   |
| currency  | string | Currency for the player                              |

> ##### Example
>
> http://{PROVIDER_API_ENDPOINT}/api/user/create?host_id={host_id}&member_id={member_id}&currency=MYR

### Response

| Name        | Type   | Description                                 |
| ----------- | ------ | ------------------------------------------- |
| status_code | int    | Response status code                        |
| balance     | uint64 | Current **POINTS** of the player (in cents) |

#### Status Code

| Code | Description       |
| ---- | ----------------- |
| 0    | Success           |
| 1    | Invalid Member ID |
| 2    | Invalid Host ID   |
| 3    | Invalid Currency  |

<!--
type: tab
title: Examples
-->

### Sample Success Response

```json
{
  "data": {
    "status_code": 0,
    "balance": 100000
  }
}
```

### Sample Error Response

```json
{
  "error": {
    "status_code": 2,
    "message": "Invalid Host ID"
  }
}
```

<!--
type: tab
title: Try It
-->

```json http
{
  "method": "get",
  "url": "https://{PROVIDER_API_ENDPOINT}/api/user/create",
  "query": {
    "host_id": "{host_id}",
    "member_id": "{member_id}",
    "currency": "MYR"
  }
}
```

<!-- type: tab-end -->

### Get Balance

For querying the balance of a particular player account, the get balance API call should be used.

<!--
type: tab
title: Docs
-->

### Request

| Name      | Type   | Description                                          |
| --------- | ------ | ---------------------------------------------------- |
| host_id   | string | Unique ID of Operator System (provided by game provider) |
| member_id | string | Unique ID / Username of the player                   |

> ##### Example
>
> http://{PROVIDER_API_ENDPOINT}/api/user/balance?host_id={host_id}&member_id={member_id}

### Response

| Name        | Type   | Description                                 |
| ----------- | ------ | ------------------------------------------- |
| status_code | int    | Response status code                        |
| balance     | uint64 | Current **POINTS** of the player (in cents) |

#### Status Code

| Code | Description       |
| ---- | ----------------- |
| 0    | Success           |
| 1    | Invalid Member ID |
| 2    | Invalid Host ID   |

<!--
type: tab
title: Examples
-->

### Sample Success Response

```json
{
  "data": {
    "status_code": 0,
    "balance": 100000
  }
}
```

### Sample Error Response

```json
{
  "error": {
    "status_code": 2,
    "message": "Invalid Host ID"
  }
}
```

<!--
type: tab
title: Try It
-->

```json http
{
  "method": "get",
  "url": "https://{PROVIDER_API_ENDPOINT}/api/user/balance",
  "query": {
    "host_id": "{host_id}",
    "member_id": "{member_id}",
  }
}
```

<!-- type: tab-end -->

### Deposit

For transferring funds into the player account, the deposit API call should be used.

<!--
type: tab
title: Docs
-->

### Request

| Name      | Type       | Description                                          |
| --------- | ---------- | ---------------------------------------------------- |
| host_id   | string     | Unique ID of Operator System (provided by game provider) |
| member_id | string     | Unique ID / Username of the player                   |
| amount    | uint64     | Total **POINTS** to be transferred (in Cents)        |
| transid   | string(52) | Unique transaction ID from operator                  |

> If player's transfer amount is 1000 points, amount is 100000 (in Cents)

> ##### Example
>
> http://{PROVIDER_API_ENDPOINT}/api/user/deposit-v2?host_id={host_id}&member_id={member_id}&amount=10000

### Response

| Name        | Type   | Description                                 |
| ----------- | ------ | ------------------------------------------- |
| status_code | int    | Response status code                        |
| balance     | uint64 | Current **POINTS** of the player (in cents) |

#### Status Code

| Code | Description                |
| ---- | -------------------------- |
| 0    | Success                    |
| 1    | Invalid Member ID          |
| 2    | Invalid Host ID            |
| 5    | Invalid transid            |
| 6    | This transid has been used |

<!--
type: tab
title: Examples
-->

### Sample Success Response

```json
{
  "data": {
    "status_code": 0,
    "balance": 100000
  }
}
```

### Sample Error Response

```json
{
  "error": {
    "status_code": 2,
    "message": "Invalid Host ID"
  }
}
```

<!--
type: tab
title: Try It
-->

```json http
{
  "method": "get",
  "url": "https://{PROVIDER_API_ENDPOINT}/api/user/deposit-v2",
  "query": {
    "host_id": "{host_id}",
    "member_id": "{member_id}",
    "amount": "10000",
    "transid": "{transid}"
  }
}
```

<!-- type: tab-end -->

### Withdraw

For transferring funds out of the player account, the withdraw API call should be used.

<!--
type: tab
title: Docs
-->

### Request

| Name      | Type       | Description                                          |
| --------- | ---------- | ---------------------------------------------------- |
| host_id   | string     | Unique ID of Operator System (provided by game provider) |
| member_id | string     | Unique ID / Username of the player                   |
| amount    | uint64     | Total **POINTS** to be transferred (in Cents)        |
| transid   | string(52) | Unique transaction ID from operator                  |

> If player's transfer amount is 1000 points, amount is 100000 (in Cents)

> ##### Example
>
> http://{PROVIDER_API_ENDPOINT}/api/user/withdraw-v2?host_id={host_id}&member_id={member_id}&amount=10000&transid={transid}

### Response

| Name        | Type   | Description                                 |
| ----------- | ------ | ------------------------------------------- |
| status_code | int    | Response status code                        |
| balance     | uint64 | Current **POINTS** of the player (in cents) |

#### Status Code

| Code | Description                |
| ---- | -------------------------- |
| 0    | Success                    |
| 1    | Invalid Member ID          |
| 2    | Invalid Host ID            |
| 5    | Invalid transid            |
| 6    | This transid has been used |

<!--
type: tab
title: Examples
-->

### Sample Success Response

```json
{
  "data": {
    "status_code": 0,
    "balance": 100000
  }
}
```

### Sample Error Response

```json
{
  "error": {
    "status_code": 2,
    "message": "Invalid Host ID"
  }
}
```

<!--
type: tab
title: Try It
-->

```json http
{
  "method": "get",
  "url": "https://{PROVIDER_API_ENDPOINT}/api/user/withdraw-v2",
  "query": {
    "host_id": "{host_id}",
    "member_id": "{member_id}",
    "amount": "10000",
    "transid": "{transid}"
  }
}
```

<!-- type: tab-end -->

## Game List

This api will return game list to operator.

<!--
type: tab
title: Docs
-->

### Request

| Name    | Type   | Description                                          |
| ------- | ------ | ---------------------------------------------------- |
| host_id | string | Unique ID of Operator System (provided by game provider) |

> ##### Example
>
> <http://{PROVIDER_API_ENDPOINT}/api/user/gamelist?host_id={host_id}>

### Response

| Name        | Type  | Description          |
| ----------- | ----- | -------------------- |
| status_code | int   | Response status code |
| list        | array | A list of game list  |

#### Status Code

| Code | Description                    |
| ---- | ------------------------------ |
| 0    | Success                        |
| 2    | Invalid Host ID                |
| 2001 | Required field cannot be empty |

<!--
type: tab
title: Examples
-->

### Sample Success Response

```json
{
  "data": {
    "status_code": 0,
    "list": [
      {
        "title": {
          "en": "Blue Ocean",
          "cn": "蓝海龙王"
        },
        "game_code": "fish",
        "url": "http://shoot-01.velachip.com"
      }
    ]
  }
}
```

### Sample Error Response

```json
{
  "error": {
    "status_code": 2,
    "message": "Invalid Host ID",
    "retry": null
  }
}
```

<!--
type: tab
title: Try It
-->

```json http
{
  "method": "get",
  "url": "https://{PROVIDER_API_ENDPOINT}/api/user/gamelist",
  "query": {
    "host_id": "{host_id}"
  }
}
```

<!-- type: tab-end -->

## Game Launch

For launching games please refer URL parameters as below. The game URL is refer to game list reponse.

<!--
type: tab
title: Docs
-->

### Request

| Name           | Type   | Description                                                                         |
| -------------- | ------ | ----------------------------------------------------------------------------------- |
| host_id        | string | Unique ID of Operator System (provided by game provider)                                |
| access_token   | string | The access token is generated by operator system for the player's session.      |
| mode           | string | Game mode <br> (singleplayer, multiplayer) <br> \*\*only required for action game   |
| lang           | string | Language of the game (ch, en) <br> Default language is en                           |
| allow_vertical | int    | Default is 1 <br> 0 - landscape mode <br> 1 - allow vertical mode and landscap mode |

> If host_id and access_token is not provided, it is treated as **Guest** mode.

> ##### Example
>
> http://{GAME_URL}?host_id={host_id}&access_token={access_token}&mode=singleplayer&lang=ch&allow_vertical=1

<!-- type: tab-end -->

## User Report

This API is to get the games report from Game Server. **Operator** must maintain the key to keep track log request. For the first time to request log, key = 0. The response return the key value to **operator** for the next log request.

<!--
type: tab
title: Docs
-->

### Request

| Name    | Type   | Description                                          |
| ------- | ------ | ---------------------------------------------------- |
| host_id | string | Unique ID of Operator System (provided by game provider) |
| key     | string | Unique database index number                         |

> If key is empty, it will return data from index zero (0).

> ##### Example
>
> http://{PROVIDER_API_ENDPOINT}/api/report?host_id={host_id}&key={key}

### Response

| Name        | Type  | Description          |
| ----------- | ----- | -------------------- |
| status_code | int   | Response status code |
| report      | array | A list report        |

#### Status Code

| Code | Description     |
| ---- | --------------- |
| 0    | Success         |
| 2    | Invalid Host ID |

#### Report

| Name          | Type   | Description     |
| ------------- | ------ | --------------- |
| id            | int    | Id              |
| ticket_id     | int    | Ticket Id       |
| game_code     | string | Game code       |
| game_group    | string | Game group      |
| username      | string | Player username |
| bet_stake     | double | Bet stake       |
| commission    | double | Commission      |
| bet_info      | array  | Bet info        |
| result_info   | array  | Result info     |
| payout_amount | double | Payout amount   |
| gain_amount   | double | Gain amount     |
| loss_amount   | double | Loss amount     |
| draw_amount   | double | Draw amount     |
| cancel_amount | double | Cancel amount   |
| reject_amount | double | Reject amount   |
| status        | string | Status          |
| report_date   | date   | Report date     |

<!--
type: tab
title: Examples
-->

### Sample Success Response

```json
{
  "data": {
    "status_code": 0,
    "report": [
      {
        "id": "355005",
        "ticket_id": "11756",
        "game_code": "zodiac2",
        "game_group": "zodiac",
        "username": "demo04",
        "bet_stake": 200,
        "commission": 0,
        "bet_info": {
          "bet_type": "small",
          "bet_category": "big_small"
        },
        "result_info": {
          "bet_result": "lose",
          "result": {
            "zodiac": "z9",
            "big_small": "big",
            "black_red": "black",
            "odd_even": "even"
          }
        },
        "payout_amount": 0,
        "gain_amount": 0,
        "loss_amount": 200,
        "draw_amount": 0,
        "cancel_amount": 0,
        "reject_amount": 0,
        "data": null,
        "status": "done",
        "remark": null,
        "report_date": "2017-03-29 14:40:32"
      }
    ],
    "key": "355005"
  }
}
```

### Sample Error Response

```json
{
  "error": {
    "status_code": 2,
    "message": "Invalid Host ID"
  }
}
```

<!--
type: tab
title: Try It
-->

```json http
{
  "method": "get",
  "url": "https://{PROVIDER_API_ENDPOINT}/api/report",
  "query": {
    "host_id": "{host_id}",
    "key": "{key}"
  }
}
```

<!-- type: tab-end -->